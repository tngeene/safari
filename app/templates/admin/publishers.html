{% extends 'layouts/admin_base.html' %}

{% block custom_head_tags %}
{{ super() }}
<!-- CORE CSS-->
<link href="{{ url_for('static', filename='css/themes/horizontal-menu/materialize.css')}}" type="text/css"
      rel="stylesheet">
<link href="{{ url_for('static', filename='css/themes/horizontal-menu/style.css') }}" type="text/css" rel="stylesheet">
<link href="{{ url_for('static', filename='css/layouts/style-horizontal.css') }}" type="text/css" rel="stylesheet">
<link href="{{ url_for('static', filename='vendors/prism/prism.css') }}" type="text/css" rel="stylesheet">
<link href="{{ url_for('static', filename='vendors/perfect-scrollbar/perfect-scrollbar.css') }}" type="text/css" rel="stylesheet">
<link href="{{ url_for('static', filename='vendors/data-tables/css/jquery.dataTables.min.css') }}" type="text/css" rel="stylesheet">
<link href="{{ url_for('static', filename='vendors/flag-icon/css/flag-icon.min.css') }}" type="text/css" rel="stylesheet">
{% endblock %}

{% block content %}
    <section id="content">
        <!--start container-->
        <!--start container-->
        <div class="container">
            <div class="section">
                <!--DataTables example-->
                <div id="table-datatables">
                    <h4 class="header">All Publishers</h4>
                    <div class="row">
                        <div class="col s12">
                            <table id="data-table-simple" class="responsive-table display" cellspacing="0">
                              <thead>
                                <tr>
                                  <th>#</th>
                                  <th>Company</th>
                                  <th>Email</th>
                                  <th>Total Listings</th>
                                  <th>Status</th>
                                  <th>Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                {%  for publisher in publishers %}
                                <tr>
                                  <td>{{ loop.index }}</td>
                                  <td><a href="{{url_for('home.tour_operator_details',publisher_id=publisher.user.id)}}">{{publisher.company_name}}</a></td>
                                  <td>{{publisher.emails[0].email}}</td>
                                  <td>{{publisher.user.listings.count()}}</td>
                                  <td class="{{ 'green-text' if publisher.user.status else 'red-text' }}">{{ 'Active' if publisher.user.status else 'Deactivated' }}</td>
                                  <td>{% if publisher.user.status %}
                                    <a href="{{ url_for('admin.suspend', user_id=publisher.user.id,sender='publisher') }}"
                                     class="waves-effect waves-light  btn gradient-45deg-red-pink box-shadow-none border-round mr-1">Suspend</a>
                                  {% else %}

                                  <a href="{{ url_for('admin.suspend', user_id=publisher.user.id,sender='publisher') }}"
                                     class="waves-effect waves-light  btn gradient-45deg-green-teal box-shadow-none border-round mr-1">Activate</a>
                                  {%endif%}
                                </td>
                                </tr>
                                {% endfor %}
                              </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Floating Action Button -->
            </div>
            <!--end container-->
        </div>
    </section>

{% endblock %}
